#!/bin/sh

if [ "$CURRENT_ENV" = "lab" -o "$CURRENT_ENV" = "home-desktop" ]; then
    exec trayer --edge top --align left --margin 1728 --SetDockType true --SetPartialStrut true --expand true --width 192 --widthtype pixel --transparent true --tint 0x000000 --height 23 --alpha 0
elif [ "$CURRENT_ENV" = "lab-desktop" ]; then
    exec trayer --edge top --align right --monitor 0 --SetDockType true --SetPartialStrut true --expand true --width 256 --widthtype pixel --transparent true --tint 0x000000 --height 23 --alpha 0
else
    monitor=0
    hdmi_output="$(xrandr | grep 'HDMI1 connected')"
    if [ $? -eq 0 ]; then
        hdmi_position="$(echo "$hdmi_output" | awk '{ match($3, /[0-9]+x[0-9]+\+([0-9]+)\+[0-9]+/, arr); print arr[1] }')"
        if [ "$hdmi_position" != "" -a "$hdmi_position" -gt 0  ]; then
            monitor=1
        fi
    fi
    exec trayer --monitor $monitor --edge top --align right --SetDockType true --SetPartialStrut true --expand true --width 192 --widthtype pixel --transparent true --tint 0x000000 --height 23 --alpha 0
fi
